(this["webpackJsonp03-react-router-formik"]=this["webpackJsonp03-react-router-formik"]||[]).push([[0],{15:function(e){e.exports=JSON.parse('[{"id":1,"username":"yaroslav","role":"admin","timestamp":"2021-8-Wednesday 21:28","age":25},{"id":2,"username":"test-user","role":"user","timestamp":"2021-8-Tuesday 21:28","age":17}]')},16:function(e){e.exports=JSON.parse('[{"id":1,"name":"Ferrari","model":"Portofino","timestamp":"2021-8-Monday 21:08","gearbox":"manual"},{"id":2,"name":"Lamborghini","model":"Aventador","timestamp":"2021-8-Wednesday 21:30","gearbox":"auto"}]')},41:function(e,t,n){},43:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var r,c=n(1),a=n(34),s=n.n(a),i=n(7),u=n(3),o=(n(41),n(13)),b="view",d="create",j="edit",l="clone",O="delete",x=n(9),h=n(2),f=n.n(h),m=n(6),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800;return new Promise((function(t){setTimeout(t,e)}))},v=function(e){return function(){return++e}},g=function(){var e=new Date(Date.now());return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat({0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}[e.getDay()]," ").concat(e.getHours(),":").concat(e.getMinutes())},w=function(e){throw new Error("Record with ID ".concat(e," does not exist"))},k=n(15),N=v(k.length),C={getUsers:function(){return Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(1e3);case 2:return console.log("GET /users",k),e.abrupt("return",k);case 4:case"end":return e.stop()}}),e)})))()},getUser:function(e){return Object(m.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:if(!(n=k.find((function(t){return t.id===e})))){t.next=8;break}return console.log("GET /users/".concat(n.id),n),t.abrupt("return",n);case 8:w(e);case 9:case"end":return t.stop()}}),t)})))()},createUser:function(e){return Object(m.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:return n=Object(x.a)(Object(x.a)({},e),{},{id:N(),timestamp:g()}),k.push(n),console.log("POST /users",n),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()},editUser:function(e){return Object(m.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:if(!~(n=k.findIndex((function(t){return t.id===e.id})))){t.next=9;break}return k[n]=Object(x.a)(Object(x.a)({},e),{},{timestamp:g()}),console.log("PUT /users",k[n]),t.abrupt("return",k[n]);case 9:w(e.id);case 10:case"end":return t.stop()}}),t)})))()},deleteUser:function(e){return Object(m.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:if(!~(n=k.findIndex((function(t){return t.id===e.id})))){t.next=8;break}return console.log("DELETE /users",e),t.abrupt("return",k.splice(n,1));case 8:w(e.id);case 9:case"end":return t.stop()}}),t)})))()},getRoles:function(){return Object(m.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return t=["user","super-user","admin"],console.log("GET /roles",t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))()}},y=n(17),U="username",E="role",S="age",B=(r={},Object(y.a)(r,U,""),Object(y.a)(r,E,""),Object(y.a)(r,S,0),r),T=(n(43),n(0));var q=function(e){var t=e.id,n=Object(u.i)().url,r=Object(u.g)(),c=function(e){return function(){r.push("".concat(n,"/user/").concat(e,"/").concat(t))}};return Object(T.jsxs)("div",{className:"Actions",children:[Object(T.jsx)("button",{onClick:c(b),className:"viewBtn button",children:"View"})," ",Object(T.jsx)("button",{onClick:c(j),className:"editBtn button",children:"Edit"})," ",Object(T.jsx)("button",{onClick:c(l),className:"cloneBtn button",children:"Clone"})," ",Object(T.jsx)("button",{onClick:c(O),className:"deleteBtn button",children:"Delete"})]})};n(49);var A=function(e){var t=e.users,n=e.setUsers,r=Object(u.i)().url;return Object(c.useEffect)((function(){C.getUsers().then(n)}),[n]),Object(T.jsxs)("div",{className:"UsersTable",children:[Object(T.jsx)(i.b,{to:"".concat(r,"/user/").concat(d),children:Object(T.jsx)("p",{className:"createBtn",children:"Create User"})}),Object(T.jsxs)("table",{children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"ID"}),Object(T.jsx)("th",{children:"Username"}),Object(T.jsx)("th",{children:"Age"}),Object(T.jsx)("th",{children:"Role"}),Object(T.jsx)("th",{children:"Last Updated At"}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("tbody",{children:t.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.id}),Object(T.jsx)("td",{children:e.username}),Object(T.jsx)("td",{children:e.age}),Object(T.jsx)("td",{children:e.role}),Object(T.jsx)("td",{children:e.timestamp}),Object(T.jsx)("td",{children:Object(T.jsx)(q,{id:e.id})})]},e.id)}))})]})]})},D=n(27),G=n(8);n(50);var I=function(e){var t=e.name,n=e.label,r=e.value,c=e.disabled,a=void 0!==c&&c,s=e.validate,i=Object(G.d)({name:t,validate:s}),u=Object(o.a)(i,1)[0];return Object(T.jsxs)("div",{className:"select",children:[Object(T.jsxs)("label",{children:[Object(T.jsx)("div",{children:n}),Object(T.jsxs)("select",Object(x.a)(Object(x.a)({disabled:a},u),{},{className:"options",children:[Object(T.jsx)("option",{}),r.map((function(e,t){return Object(T.jsx)("option",{children:e},t)}))]}))]}),Object(T.jsx)(G.a,{name:t,className:"error",component:"div"})]})};n(51);var P=function(e){var t=e.name,n=e.label,r=e.validate,c=e.type,a=void 0===c?"text":c,s=e.disabled,i=void 0!==s&&s,u=(e.required,Object(G.d)({name:t,validate:r})),b=Object(o.a)(u,1)[0];return Object(T.jsxs)("div",{className:"Input",children:[Object(T.jsxs)("label",{children:[Object(T.jsx)("div",{children:n}),Object(T.jsx)("input",Object(x.a)(Object(x.a)({type:a,disabled:i},b),{},{className:"info",placeholder:n}))]}),Object(T.jsx)(G.a,{name:t,className:"error",component:"div"})]})};n(52);var F=function(e){var t=e.mode,n=Object(u.g)(),r=Object(G.e)().isSubmitting;return Object(T.jsxs)("div",{children:[(t===d||t===j)&&Object(T.jsx)("button",{type:"submit",disabled:r,className:"submitBtn",children:"Save"}),t===l&&Object(T.jsx)("button",{type:"submit",disabled:r,className:"submitBtn",children:"Clone"}),t===O&&Object(T.jsx)("button",{type:"submit",disabled:r,className:"submitBtn",children:"Delete"}),Object(T.jsx)("button",{type:"button",onClick:function(){return n.push("/users")},className:"submitBtn",children:"Cancel"})]})};n(53);var M=function(e){var t=e.initialValues,n=e.onSubmit,r=e.mode,c=e.roles,a=e.required;return Object(T.jsx)(G.c,{initialValues:t,onSubmit:n,children:Object(T.jsx)(G.b,{children:Object(T.jsxs)("div",{className:"form",children:[Object(T.jsx)(P,{name:U,label:"Username",disabled:r===b||r===O,required:a,validate:function(e){if(""===e.trim())return"Please, enter your name:)"}}),Object(T.jsx)(P,{name:S,label:"Age",disabled:r===b||r===O,type:"number",required:a,validate:function(e){if(e<=15||e>=111)return"Not allowed age!"}}),Object(T.jsx)(I,{name:E,label:"Role",disabled:r===b||r===O,value:c,validate:function(e){if(!e)return"Field is required"}}),Object(T.jsx)("br",{}),Object(T.jsx)(F,{mode:r})]})})})};var V=function(e){var t=e.users,n=e.setUsers,r=Object(u.h)(),a=r.mode,s=r.id,i=Object(u.g)(),x=t.find((function(e){return e.id===Number(s)}));Object(c.useEffect)((function(){a!==b&&a!==j||x||C.getUser(Number(s)).then((function(e){return n((function(t){return[].concat(Object(D.a)(t),[e])}))})).catch((function(e){return window.alert(e.message)}))}),[s,a,x,n]);var h=Object(c.useState)([]),p=Object(o.a)(h,2),v=p[0],g=p[1];Object(c.useEffect)((function(){C.getRoles().then(g)}),[n]);var w=function(){var e=Object(m.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=t,e.t0=a,e.next=e.t0===d?5:e.t0===j?8:e.t0===l?11:e.t0===O?14:17;break;case 5:return e.next=7,C.createUser(n);case 7:return e.abrupt("break",18);case 8:return e.next=10,C.editUser(n);case 10:return e.abrupt("break",18);case 11:return e.next=13,C.createUser(n);case 13:return e.abrupt("break",18);case 14:return e.next=16,C.deleteUser(n);case 16:return e.abrupt("break",18);case 17:console.error("Failed to execute this request for ".concat(a," mode"));case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0),window.alert(e.t1.message);case 23:i.push("/users");case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),k=function(e){return e||B}(x);return Object(T.jsx)(M,{initialValues:k,onSubmit:w,mode:a,roles:v,required:!0},"".concat(a,":").concat(k.id))};n(54);var L=function(){return Object(T.jsxs)("div",{children:[Object(T.jsx)("h1",{children:"Not Found"}),Object(T.jsx)("h3",{children:"Error 404"})]})};var R,J=function(){var e=Object(u.i)().path,t=Object(c.useState)([]),n=Object(o.a)(t,2),r=n[0],a=n[1];return Object(T.jsx)("div",{className:"App",children:Object(T.jsxs)(u.d,{children:[Object(T.jsx)(u.b,{exact:!0,path:e,children:Object(T.jsx)(A,{users:r,setUsers:a})}),Object(T.jsx)(u.b,{exact:!0,path:"".concat(e,"/user/:mode(").concat(b,"|").concat(d,"|").concat(j,"|").concat(l,"|").concat(O,")/:id?"),children:Object(T.jsx)(V,{users:r,setUsers:a})}),Object(T.jsx)(u.b,{path:"*",children:Object(T.jsx)(L,{})})]})})},W=n(16),H=v(W.length),Y={getCars:function(){return Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(1e3);case 2:return console.log("GET /cars",W),e.abrupt("return",W);case 4:case"end":return e.stop()}}),e)})))()},getCar:function(e){return Object(m.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:if(!(n=W.find((function(t){return t.id===e})))){t.next=8;break}return console.log("GET /cars/".concat(n.id),n),t.abrupt("return",n);case 8:w(e);case 9:case"end":return t.stop()}}),t)})))()},createCar:function(e){return Object(m.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:return n=Object(x.a)(Object(x.a)({},e),{},{id:H(),timestamp:g()}),W.push(n),console.log("POST /cars",n),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()},editCar:function(e){return Object(m.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:if(!~(n=W.findIndex((function(t){return t.id===e.id})))){t.next=9;break}return W[n]=Object(x.a)(Object(x.a)({},e),{},{timestamp:g()}),console.log("PUT /car",W[n]),t.abrupt("return",W[n]);case 9:w(e.id);case 10:case"end":return t.stop()}}),t)})))()},deleteCar:function(e){return Object(m.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:if(!~(n=W.findIndex((function(t){return t.id===e.id})))){t.next=8;break}return console.log("DELETE /car",e),t.abrupt("return",W.splice(n,1));case 8:w(e.id);case 9:case"end":return t.stop()}}),t)})))()},getGearbox:function(){return Object(m.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return t=["manual","auto"],console.log("GET /gearboxes",t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))()}},z="name",K="model",Q="gearbox",X=(R={},Object(y.a)(R,z,""),Object(y.a)(R,K,""),Object(y.a)(R,Q,""),R);var Z=function(e){var t=e.id,n=Object(u.i)().url,r=Object(u.g)(),c=function(e){return function(){r.push("".concat(n,"/car/").concat(e,"/").concat(t))}};return Object(T.jsxs)("div",{className:"Actions",children:[Object(T.jsx)("button",{onClick:c(b),className:"viewBtn button",children:"View"})," ",Object(T.jsx)("button",{onClick:c(j),className:"editBtn button",children:"Edit"})," ",Object(T.jsx)("button",{onClick:c(l),className:"cloneBtn button",children:"Clone"})," ",Object(T.jsx)("button",{onClick:c(O),className:"deleteBtn button",children:"Delete"})]})};n(55);var $=function(e){var t=e.cars,n=e.setCars,r=Object(u.i)().url;return Object(c.useEffect)((function(){Y.getCars().then(n)}),[n]),Object(T.jsxs)("div",{className:"CarsTable",children:[Object(T.jsx)(i.b,{to:"".concat(r,"/car/").concat(d),children:Object(T.jsx)("p",{className:"createBtn",children:"Create Car"})}),Object(T.jsxs)("table",{children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"ID"}),Object(T.jsx)("th",{children:"Name"}),Object(T.jsx)("th",{children:"Model"}),Object(T.jsx)("th",{children:"Gearbox"}),Object(T.jsx)("th",{children:"Last Updated At"}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("tbody",{children:t.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.id}),Object(T.jsx)("td",{children:e.name}),Object(T.jsx)("td",{children:e.model}),Object(T.jsx)("td",{children:e.gearbox}),Object(T.jsx)("td",{children:e.timestamp}),Object(T.jsx)("td",{children:Object(T.jsx)(Z,{id:e.id})})]},e.id)}))})]})]})};n(56);var _=function(e){var t=e.mode,n=Object(u.g)(),r=Object(G.e)().isSubmitting;return Object(T.jsxs)("div",{children:[(t===d||t===j)&&Object(T.jsx)("button",{type:"submit",disabled:r,className:"submitBtn",children:"Save"}),t===l&&Object(T.jsx)("button",{type:"submit",disabled:r,className:"submitBtn",children:"Clone"}),t===O&&Object(T.jsx)("button",{type:"submit",disabled:r,className:"submitBtn",children:"Delete"}),Object(T.jsx)("button",{type:"button",onClick:function(){return n.push("/cars")},className:"submitBtn",children:"Cancel"})]})};n(57);var ee=function(e){var t=e.initialValues,n=e.onSubmit,r=e.mode,c=e.gearboxes,a=e.required;return Object(T.jsx)(G.c,{initialValues:t,onSubmit:n,children:Object(T.jsx)(G.b,{children:Object(T.jsxs)("div",{className:"form",children:[Object(T.jsx)(P,{name:z,label:"Name",disabled:r===b||r===O,required:a,validate:function(e){if(""===e.trim())return"Please, enter cars name:)"}}),Object(T.jsx)(P,{name:K,label:"Model",disabled:r===b||r===O,required:a,validate:function(e){if(""===e.trim())return"Please, enter cars model:)"}}),Object(T.jsx)(I,{name:Q,label:"Gearbox",disabled:r===b||r===O,value:c,validate:function(e){if(!e)return"Field is required"}}),Object(T.jsx)("br",{}),Object(T.jsx)(_,{mode:r})]})})})};var te=function(e){var t=e.cars,n=e.setCars,r=Object(u.h)(),a=r.mode,s=r.id,i=Object(u.g)(),x=t.find((function(e){return e.id===Number(s)}));Object(c.useEffect)((function(){a!==b&&a!==j||x||Y.getCar(Number(s)).then((function(e){return n((function(t){return[].concat(Object(D.a)(t),[e])}))})).catch((function(e){return window.alert(e.message)}))}),[s,a,t,n]);var h=Object(c.useState)([]),p=Object(o.a)(h,2),v=p[0],g=p[1];Object(c.useEffect)((function(){Y.getGearbox().then(g)}),[n]);var w=function(){var e=Object(m.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=t,e.t0=a,e.next=e.t0===d?5:e.t0===j?8:e.t0===l?11:e.t0===O?14:17;break;case 5:return e.next=7,Y.createCar(n);case 7:return e.abrupt("break",18);case 8:return e.next=10,Y.editCar(n);case 10:return e.abrupt("break",18);case 11:return e.next=13,Y.createCar(n);case 13:return e.abrupt("break",18);case 14:return e.next=16,Y.deleteCar(n);case 16:return e.abrupt("break",18);case 17:console.error("Failed to execute this request for ".concat(a," mode"));case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0),window.alert(e.t1.message);case 23:i.push("/cars");case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),k=x||X;return Object(T.jsx)(ee,{initialValues:k,onSubmit:w,mode:a,gearboxes:v,required:!0},"".concat(a,":").concat(k.id))};var ne=function(){var e=Object(u.i)().path,t=Object(c.useState)([]),n=Object(o.a)(t,2),r=n[0],a=n[1];return Object(T.jsx)("div",{className:"App",children:Object(T.jsxs)(u.d,{children:[Object(T.jsx)(u.b,{exact:!0,path:e,children:Object(T.jsx)($,{cars:r,setCars:a})}),Object(T.jsx)(u.b,{exact:!0,path:"".concat(e,"/car/:mode(").concat(b,"|").concat(d,"|").concat(j,"|").concat(l,"|").concat(O,")/:id?"),children:Object(T.jsx)(te,{cars:r,setCars:a})}),Object(T.jsx)(u.b,{path:"*",children:Object(T.jsx)(L,{})})]})})};var re=function(){return Object(T.jsxs)("div",{className:"App",children:[Object(T.jsxs)("nav",{children:[Object(T.jsx)("h3",{children:"Menu"}),Object(T.jsxs)("ul",{className:"nav-links",children:[Object(T.jsx)("li",{children:Object(T.jsx)(i.b,{to:"/users",children:Object(T.jsx)("p",{children:"Users"})})}),Object(T.jsx)("li",{children:Object(T.jsx)(i.b,{to:"/cars",children:Object(T.jsx)("p",{children:"Cars"})})})]})]}),Object(T.jsxs)(u.d,{children:[Object(T.jsx)(u.a,{exact:!0,from:"/",to:"/users"}),Object(T.jsx)(u.b,{path:"/users",children:Object(T.jsx)(J,{})}),Object(T.jsx)(u.b,{path:"/cars",children:Object(T.jsx)(ne,{})}),Object(T.jsx)(u.b,{path:"*",children:Object(T.jsx)(L,{})})]})]})};var ce=function(e){var t=e.children;return Object(T.jsx)(i.a,{basename:"/globallogic-js-basecamp-2021/react/03-react-router-formik/build",children:t})},ae=(n(58),document.getElementById("root"));s.a.render(Object(T.jsx)(c.StrictMode,{children:Object(T.jsx)(ce,{children:Object(T.jsx)(re,{})})}),ae)}},[[59,1,2]]]);
//# sourceMappingURL=main.f28dc4e0.chunk.js.map