(this["webpackJsonp04-redux"]=this["webpackJsonp04-redux"]||[]).push([[0],{13:function(e){e.exports=JSON.parse('[{"id":1,"username":"yaroslav","role":"admin","timestamp":"2021-8-Wednesday 21:28","age":25},{"id":2,"username":"test-user","role":"user","timestamp":"2021-8-Tuesday 21:28","age":17}]')},37:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var c,r,s=n(0),a=n(27),i=n.n(a),o=n(22),u=n(11),d=n(7),l=n(25),j=Object(l.a)({name:"todolist",initialState:[],reducers:{addTodos:function(e,t){return e.push(t.payload),e},removeTodos:function(e,t){return e.filter((function(e){return e.id!==t.payload}))},completeTodos:function(e,t){return e.map((function(e){return e.id===t.payload?Object(d.a)(Object(d.a)({},e),{},{completed:!0}):e}))}}}),b=j.actions,O=b.addTodos,x=b.removeTodos,h=b.completeTodos,m=j.reducer,f=Object(u.b)({reducerTodo:m}),p=n(41),v=Object(u.d)(f,Object(u.a)(p.a)),g=n(14),N=n(3),T=(n(49),n(16)),y="view",w="create",k="edit",U="clone",E="delete",S=n(5),B=n.n(S),C=n(18),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800;return new Promise((function(t){setTimeout(t,e)}))},A=function(){var e=new Date(Date.now());return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat({0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}[e.getDay()]," ").concat(e.getHours(),":").concat(e.getMinutes())},q=function(e){throw new Error("Record with ID ".concat(e," does not exist"))},I=n(13),R=(c=I.length,function(){return++c}),F={getUsers:function(){return Object(C.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(1e3);case 2:return console.log("GET /users",I),e.abrupt("return",I);case 4:case"end":return e.stop()}}),e)})))()},getUser:function(e){return Object(C.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:if(!(n=I.find((function(t){return t.id===e})))){t.next=8;break}return console.log("GET /users/".concat(n.id),n),t.abrupt("return",n);case 8:q(e);case 9:case"end":return t.stop()}}),t)})))()},createUser:function(e){return Object(C.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:return n=Object(d.a)(Object(d.a)({},e),{},{id:R(),timestamp:A()}),I.push(n),console.log("POST /users",n),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()},editUser:function(e){return Object(C.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:if(!~(n=I.findIndex((function(t){return t.id===e.id})))){t.next=9;break}return I[n]=Object(d.a)(Object(d.a)({},e),{},{timestamp:A()}),console.log("PUT /users",I[n]),t.abrupt("return",I[n]);case 9:q(e.id);case 10:case"end":return t.stop()}}),t)})))()},deleteUser:function(e){return Object(C.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:if(!~(n=I.findIndex((function(t){return t.id===e.id})))){t.next=8;break}return console.log("DELETE /users",e),t.abrupt("return",I.splice(n,1));case 8:q(e.id);case 9:case"end":return t.stop()}}),t)})))()},getRoles:function(){return Object(C.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:return t=["user","super-user","admin"],console.log("GET /roles",t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))()}},M=n(24),P="username",V="role",G="age",J=(r={},Object(M.a)(r,P,""),Object(M.a)(r,V,""),Object(M.a)(r,G,0),r),L=(n(51),n(1));var W=function(e){var t=e.id,n=Object(N.i)().url,c=Object(N.g)(),r=function(e){return function(){c.push("".concat(n,"/user/").concat(e,"/").concat(t))}};return Object(L.jsxs)("div",{className:"Actions",children:[Object(L.jsx)("button",{onClick:r(y),className:"viewBtn button",children:"View"})," ",Object(L.jsx)("button",{onClick:r(k),className:"editBtn button",children:"Edit"})," ",Object(L.jsx)("button",{onClick:r(U),className:"cloneBtn button",children:"Clone"})," ",Object(L.jsx)("button",{onClick:r(E),className:"deleteBtn button",children:"Delete"})]})};n(54);var H=function(e){var t=e.users,n=e.setUsers,c=Object(N.i)().url;return Object(s.useEffect)((function(){F.getUsers().then(n)}),[n]),Object(L.jsxs)("div",{className:"UsersTable",children:[Object(L.jsx)(g.b,{to:"".concat(c,"/user/").concat(w),children:Object(L.jsx)("p",{className:"createBtn",children:"Create User"})}),Object(L.jsxs)("table",{children:[Object(L.jsx)("thead",{children:Object(L.jsxs)("tr",{children:[Object(L.jsx)("th",{children:"ID"}),Object(L.jsx)("th",{children:"Username"}),Object(L.jsx)("th",{children:"Age"}),Object(L.jsx)("th",{children:"Role"}),Object(L.jsx)("th",{children:"Last Updated At"}),Object(L.jsx)("th",{children:"Actions"})]})}),Object(L.jsx)("tbody",{children:t.map((function(e){return Object(L.jsxs)("tr",{children:[Object(L.jsx)("td",{children:e.id}),Object(L.jsx)("td",{children:e.username}),Object(L.jsx)("td",{children:e.age}),Object(L.jsx)("td",{children:e.role}),Object(L.jsx)("td",{children:e.timestamp}),Object(L.jsx)("td",{children:Object(L.jsx)(W,{id:e.id})})]},e.id)}))})]})]})},Y=n(23),z=n(15);n(55);var K=function(e){var t=e.name,n=e.label,c=e.value,r=e.disabled,s=void 0!==r&&r,a=e.validate,i=Object(z.d)({name:t,validate:a}),o=Object(T.a)(i,1)[0];return Object(L.jsxs)("div",{className:"select",children:[Object(L.jsxs)("label",{children:[Object(L.jsx)("div",{children:n}),Object(L.jsxs)("select",Object(d.a)(Object(d.a)({disabled:s},o),{},{className:"options",children:[Object(L.jsx)("option",{}),c.map((function(e,t){return Object(L.jsx)("option",{children:e},t)}))]}))]}),Object(L.jsx)(z.a,{name:t,className:"error",component:"div"})]})};n(56);var Q=function(e){var t=e.name,n=e.label,c=e.validate,r=e.type,s=void 0===r?"text":r,a=e.disabled,i=void 0!==a&&a,o=(e.required,Object(z.d)({name:t,validate:c})),u=Object(T.a)(o,1)[0];return Object(L.jsxs)("div",{className:"Input",children:[Object(L.jsxs)("label",{children:[Object(L.jsx)("div",{children:n}),Object(L.jsx)("input",Object(d.a)(Object(d.a)({type:s,disabled:i},u),{},{className:"info",placeholder:n}))]}),Object(L.jsx)(z.a,{name:t,className:"error",component:"div"})]})};n(57);var X=function(e){var t=e.mode,n=Object(N.g)(),c=Object(z.e)().isSubmitting;return Object(L.jsxs)("div",{children:[(t===w||t===k)&&Object(L.jsx)("button",{type:"submit",disabled:c,className:"submitBtn",children:"Save"}),t===U&&Object(L.jsx)("button",{type:"submit",disabled:c,className:"submitBtn",children:"Clone"}),t===E&&Object(L.jsx)("button",{type:"submit",disabled:c,className:"submitBtn",children:"Delete"}),Object(L.jsx)("button",{type:"button",onClick:function(){return n.push("/users")},className:"submitBtn",children:"Cancel"})]})};n(58);var Z=function(e){var t=e.initialValues,n=e.onSubmit,c=e.mode,r=e.roles,s=e.required;return Object(L.jsx)(z.c,{initialValues:t,onSubmit:n,children:Object(L.jsx)(z.b,{children:Object(L.jsxs)("div",{className:"form",children:[Object(L.jsx)(Q,{name:P,label:"Username",disabled:c===y||c===E,required:s,validate:function(e){if(""===e.trim())return"Please, enter your name:)"}}),Object(L.jsx)(Q,{name:G,label:"Age",disabled:c===y||c===E,type:"number",required:s,validate:function(e){if(e<=15||e>=111)return"Not allowed age!"}}),Object(L.jsx)(K,{name:V,label:"Role",disabled:c===y||c===E,value:r,validate:function(e){if(!e)return"Field is required"}}),Object(L.jsx)("br",{}),Object(L.jsx)(X,{mode:c})]})})})};var $=function(e){var t=e.users,n=e.setUsers,c=Object(N.h)(),r=c.mode,a=c.id,i=Object(N.g)(),o=t.find((function(e){return e.id===Number(a)}));Object(s.useEffect)((function(){r!==y&&r!==k||o||F.getUser(Number(a)).then((function(e){return n((function(t){return[].concat(Object(Y.a)(t),[e])}))})).catch((function(e){return window.alert(e.message)}))}),[a,r,o,n]);var u=Object(s.useState)([]),d=Object(T.a)(u,2),l=d[0],j=d[1];Object(s.useEffect)((function(){F.getRoles().then(j)}),[n]);var b=function(){var e=Object(C.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=t,e.t0=r,e.next=e.t0===w?5:e.t0===k?8:e.t0===U?11:e.t0===E?14:17;break;case 5:return e.next=7,F.createUser(n);case 7:return e.abrupt("break",18);case 8:return e.next=10,F.editUser(n);case 10:return e.abrupt("break",18);case 11:return e.next=13,F.createUser(n);case 13:return e.abrupt("break",18);case 14:return e.next=16,F.deleteUser(n);case 16:return e.abrupt("break",18);case 17:console.error("Failed to execute this request for ".concat(r," mode"));case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0),window.alert(e.t1.message);case 23:i.push("/users");case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),O=function(e){return e||J}(o);return Object(L.jsx)(Z,{initialValues:O,onSubmit:b,mode:r,roles:l,required:!0},"".concat(r,":").concat(O.id))};n(59);var _=function(){return Object(L.jsxs)("div",{children:[Object(L.jsx)("h1",{children:"Not Found"}),Object(L.jsx)("h3",{children:"Error 404"})]})};var ee=function(){var e=Object(N.i)().path,t=Object(s.useState)([]),n=Object(T.a)(t,2),c=n[0],r=n[1];return Object(L.jsx)("div",{className:"App",children:Object(L.jsxs)(N.d,{children:[Object(L.jsx)(N.b,{exact:!0,path:e,children:Object(L.jsx)(H,{users:c,setUsers:r})}),Object(L.jsx)(N.b,{exact:!0,path:"".concat(e,"/user/:mode(").concat(y,"|").concat(w,"|").concat(k,"|").concat(U,"|").concat(E,")/:id?"),children:Object(L.jsx)($,{users:c,setUsers:r})}),Object(L.jsx)(N.b,{path:"*",children:Object(L.jsx)(_,{})})]})})},te=(n(37),Object(o.b)((function(e){return{todos:e}}),(function(e){return{addTodo:function(t){return e(O(t))}}}))((function(e){var t=Object(s.useState)(""),n=Object(T.a)(t,2),c=n[0],r=n[1];return Object(L.jsxs)("div",{className:"addTodos",children:[Object(L.jsx)("input",{type:"text",placeholder:"Type your to do here",className:"input-todo",value:c,onChange:function(e){return function(e){r(e.target.value)}(e)}}),Object(L.jsx)("br",{}),Object(L.jsx)("button",{className:"addBtn",onClick:function(){""===c?alert("Task is empty"):(e.addTodo({id:Object(l.b)(),item:c,completed:!1}),r(""))},children:"Add"})]})}))),ne=function(e){var t=e.item,n=e.removeTodo,c=e.completeTodo;return Object(L.jsxs)("li",{className:"todoElem",children:[Object(L.jsx)("p",{children:t.item}),Object(L.jsxs)("div",{className:"buttons",children:[!1===t.completed&&Object(L.jsx)("button",{style:{color:"green"},onClick:function(){return c(t.id)},className:"optionBtn",children:"Done"}),!0===t.completed&&Object(L.jsx)("span",{children:"\u2705"}),Object(L.jsx)("button",{style:{color:"red"},onClick:function(){return n(t.id)},className:"optionBtn",children:"Remove"})]})]},t.id)},ce=Object(o.b)((function(e){return{todos:e.reducerTodo}}),(function(e){return{addTodo:function(t){return e(O(t))},removeTodo:function(t){return e(x(t))},completeTodo:function(t){return e(h(t))}}}))((function(e){return Object(L.jsx)("div",{className:"displayTodos",children:Object(L.jsx)("ul",{className:"todoList",children:e.todos.length>0?e.todos.map((function(t){return Object(L.jsx)(ne,{item:t,removeTodo:e.removeTodo,completeTodo:e.completeTodo},t.id)})):null})})}));var re=function(){return Object(L.jsxs)("div",{className:"App",children:[Object(L.jsxs)("nav",{children:[Object(L.jsx)("h3",{children:"Menu"}),Object(L.jsxs)("ul",{className:"nav-links",children:[Object(L.jsx)("li",{children:Object(L.jsx)(g.b,{to:"/users",children:Object(L.jsx)("p",{children:"Users"})})}),Object(L.jsx)("li",{children:Object(L.jsx)(g.b,{to:"/todolist",children:Object(L.jsx)("p",{children:"To do list"})})})]})]}),Object(L.jsxs)(N.d,{children:[Object(L.jsx)(N.a,{exact:!0,from:"/",to:"/users"}),Object(L.jsx)(N.b,{path:"/users",children:Object(L.jsx)(ee,{})}),Object(L.jsxs)(N.b,{path:"/todolist",children:[Object(L.jsx)("div",{className:"todoDiv",children:Object(L.jsx)(te,{})}),Object(L.jsx)("div",{className:"todosDiv",children:Object(L.jsx)(ce,{})})]}),Object(L.jsx)(N.b,{path:"*",children:Object(L.jsx)(_,{})})]})]})};var se=function(e){var t=e.children;return Object(L.jsx)(g.a,{basename:"/globallogic-js-basecamp-2021/react/04-redux/build",children:t})},ae=(n(60),document.getElementById("root"));i.a.render(Object(L.jsx)(s.StrictMode,{children:Object(L.jsx)(se,{children:Object(L.jsx)(o.a,{store:v,children:Object(L.jsx)(re,{})})})}),ae)}},[[61,1,2]]]);
//# sourceMappingURL=main.8b8b7028.chunk.js.map