(this["webpackJsonp04-redux"]=this["webpackJsonp04-redux"]||[]).push([[0],{15:function(e){e.exports=JSON.parse('[{"id":1,"username":"yaroslav","role":"admin","timestamp":"2021-8-Wednesday 21:28","age":25},{"id":2,"username":"test-user","role":"user","timestamp":"2021-8-Tuesday 21:28","age":17}]')},36:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var r,c,s=n(0),a=n(26),i=n.n(a),u=n(7),o=n(8),d=n(10),l=Object(o.c)({name:"todolist",initialState:[],reducers:{addTodos:function(e,t){return e.push(t.payload),e},removeTodos:function(e,t){return e.filter((function(e){return e.id!==t.payload}))},completeTodos:function(e,t){return e.map((function(e){return e.id===t.payload?Object(d.a)(Object(d.a)({},e),{},{completed:!0}):e}))}}}),j=l.actions,b=j.addTodos,f=j.removeTodos,O=j.completeTodos,p=l.reducer,h=n(23),x=n(2),m=n.n(x),v=n(6),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800;return new Promise((function(t){setTimeout(t,e)}))},g=function(){var e=new Date(Date.now());return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat({0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}[e.getDay()]," ").concat(e.getHours(),":").concat(e.getMinutes())},y=function(e){throw new Error("Record with ID ".concat(e," does not exist"))},N=n(15),k=(r=N.length,function(){return++r}),T={getUsers:function(){return Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(1e3);case 2:return console.log("GET /users",N),e.abrupt("return",N);case 4:case"end":return e.stop()}}),e)})))()},getUser:function(e){return Object(v.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:if(!(n=N.find((function(t){return t.id===e})))){t.next=8;break}return console.log("GET /users/".concat(n.id),n),t.abrupt("return",n);case 8:y(e);case 9:case"end":return t.stop()}}),t)})))()},createUser:function(e){return Object(v.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:return n=Object(d.a)(Object(d.a)({},e),{},{id:k(),timestamp:g()}),N.push(n),console.log("POST /users",n),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()},editUser:function(e){return Object(v.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:if(!~(n=N.findIndex((function(t){return t.id===e.id})))){t.next=9;break}return N[n]=Object(d.a)(Object(d.a)({},e),{},{timestamp:g()}),console.log("PUT /users",N[n]),t.abrupt("return",N[n]);case 9:y(e.id);case 10:case"end":return t.stop()}}),t)})))()},deleteUser:function(e){return Object(v.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:if(!~(n=N.findIndex((function(t){return t.id===e.id})))){t.next=8;break}return console.log("DELETE /users",e),t.abrupt("return",N.splice(n,1));case 8:y(e.id);case 9:case"end":return t.stop()}}),t)})))()},getRoles:function(){return Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return t=["user","super-user","admin"],console.log("GET /roles",t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))()}},C=Object(o.b)("users/fetch",Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getUsers();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),F=Object(o.b)("users/get",function(){var e=Object(v.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getUser(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),U=Object(o.b)("users/create",function(){var e=Object(v.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.createUser(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=Object(o.b)("users/update",function(){var e=Object(v.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.editUser(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S=Object(o.b)("roles/fetch",Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getRoles();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),B=Object(o.b)("users/clone",function(){var e=Object(v.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.editUser(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),D=Object(o.b)("users/remove",function(){var e=Object(v.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.deleteUser(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A=Object(o.c)({name:"users",initialState:{list:[],usersFetched:!1,roles:[],rolesFetched:!1},reducers:{},extraReducers:function(e){e.addCase(C.pending,(function(e,t){e.usersFetched=!1})).addCase(C.fulfilled,(function(e,t){e.usersFetched=!0,e.list=Object(h.a)(t.payload)})).addCase(C.rejected,(function(e,t){e.usersFetched=!1,window.alert("Failed to fetch users")})).addCase(S.pending,(function(e,t){e.rolesFetched=!1})).addCase(S.fulfilled,(function(e,t){e.rolesFetched=!0,e.roles=e.roles.concat(t.payload)})).addCase(S.rejected,(function(e,t){e.rolesFetched=!1,window.alert("Failed to fetch roles")})).addCase(U.pending,(function(e,t){e.usersFetched=!1})).addCase(U.fulfilled,(function(e,t){e.usersFetched=!0,e.list=e.list.concat(t.payload)})).addCase(U.rejected,(function(e,t){window.alert("Failed to add user")})).addCase(E.pending,(function(e,t){e.usersFetched=!1})).addCase(E.fulfilled,(function(e,t){e.usersFetched=!0,e.list=e.list.map((function(e){return e.id===t.payload.id?t.payload:e}))})).addCase(E.rejected,(function(e,t){window.alert("Failed to add user")})).addCase(B.pending,(function(e,t){e.usersFetched=!1})).addCase(B.fulfilled,(function(e,t){e.usersFetched=!0,e.list=e.list.concat(t.payload)})).addCase(B.rejected,(function(e,t){window.alert("Failed to clone user")})).addCase(D.pending,(function(e,t){e.usersFetched=!1})).addCase(D.fulfilled,(function(e,t){e.usersFetched=!0,e.list=e.list.filter((function(e){return e.id!==t.payload[0].id}))})).addCase(D.rejected,(function(e,t){window.alert("Failed to remove user")}))}}),q=A.actions,R=(q.deleteUser,q.editUser,A.reducer),I=n(40),M=Object(o.a)({reducer:{users:R,reducerTodo:p},middleware:function(e){return e().concat(I.a)}}),L=n(16),P=n(4),V=(n(49),n(20)),G="view",J="create",W="edit",H="clone",Y="delete",z=n(24),K="username",Q="role",X="age",Z=(c={},Object(z.a)(c,K,""),Object(z.a)(c,Q,""),Object(z.a)(c,X,0),c),$=(n(50),n(1));var _=function(e){var t=e.id,n=Object(P.i)().url,r=Object(P.g)(),c=function(e){return function(){r.push("".concat(n,"/user/").concat(e,"/").concat(t))}};return Object($.jsxs)("div",{className:"Actions",children:[Object($.jsx)("button",{onClick:c(G),className:"viewBtn button",children:"View"})," ",Object($.jsx)("button",{onClick:c(W),className:"editBtn button",children:"Edit"})," ",Object($.jsx)("button",{onClick:c(H),className:"cloneBtn button",children:"Clone"})," ",Object($.jsx)("button",{onClick:c(Y),className:"deleteBtn button",children:"Delete"})]})};n(53);var ee=function(){var e,t=Object(P.i)().url,n=Object(u.c)(),r=Object(u.d)((function(e){return e.users.list})),c=Object(u.d)((function(e){return e.users.usersFetched}));return Object(s.useEffect)((function(){c||n(C())}),[c,n]),c?c&&(e=Object($.jsxs)("div",{children:[Object($.jsx)(L.b,{to:"".concat(t,"/user/").concat(J),children:Object($.jsx)("p",{className:"createBtn",children:"Create User"})}),Object($.jsxs)("table",{children:[Object($.jsx)("thead",{children:Object($.jsxs)("tr",{children:[Object($.jsx)("th",{children:"ID"}),Object($.jsx)("th",{children:"Username"}),Object($.jsx)("th",{children:"Age"}),Object($.jsx)("th",{children:"Role"}),Object($.jsx)("th",{children:"Last Updated At"}),Object($.jsx)("th",{children:"Actions"})]})}),Object($.jsx)("tbody",{children:r.map((function(e){return Object($.jsxs)("tr",{children:[Object($.jsx)("td",{children:e.id}),Object($.jsx)("td",{children:e.username}),Object($.jsx)("td",{children:e.age}),Object($.jsx)("td",{children:e.role}),Object($.jsx)("td",{children:e.timestamp}),Object($.jsx)("td",{children:Object($.jsx)(_,{id:e.id})})]},e.id)}))})]})]})):e=Object($.jsx)("p",{children:"Loading..."}),Object($.jsx)("div",{className:"UsersTable",children:e})},te=n(17);n(54);var ne=function(e){var t=e.name,n=e.label,r=e.value,c=e.disabled,s=void 0!==c&&c,a=e.validate,i=Object(te.d)({name:t,validate:a}),u=Object(V.a)(i,1)[0];return Object($.jsxs)("div",{className:"select",children:[Object($.jsxs)("label",{children:[Object($.jsx)("div",{children:n}),Object($.jsxs)("select",Object(d.a)(Object(d.a)({disabled:s},u),{},{className:"options",children:[Object($.jsx)("option",{}),r.map((function(e,t){return Object($.jsx)("option",{children:e},t)}))]}))]}),Object($.jsx)(te.a,{name:t,className:"error",component:"div"})]})};n(55);var re=function(e){var t=e.name,n=e.label,r=e.validate,c=e.type,s=void 0===c?"text":c,a=e.disabled,i=void 0!==a&&a,u=(e.required,Object(te.d)({name:t,validate:r})),o=Object(V.a)(u,1)[0];return Object($.jsxs)("div",{className:"Input",children:[Object($.jsxs)("label",{children:[Object($.jsx)("div",{children:n}),Object($.jsx)("input",Object(d.a)(Object(d.a)({type:s,disabled:i},o),{},{className:"info",placeholder:n}))]}),Object($.jsx)(te.a,{name:t,className:"error",component:"div"})]})};n(56);var ce=function(e){var t=e.mode,n=Object(P.g)(),r=Object(te.e)().isSubmitting;return Object($.jsxs)("div",{children:[(t===J||t===W)&&Object($.jsx)("button",{type:"submit",disabled:r,className:"submitBtn",children:"Save"}),t===H&&Object($.jsx)("button",{type:"submit",disabled:r,className:"submitBtn",children:"Clone"}),t===Y&&Object($.jsx)("button",{type:"submit",disabled:r,className:"submitBtn",children:"Delete"}),Object($.jsx)("button",{type:"button",onClick:function(){return n.push("/users")},className:"submitBtn",children:"Cancel"})]})};n(57);var se=function(e){var t=e.initialValues,n=e.onSubmit,r=e.mode,c=e.roles,s=e.required;return Object($.jsx)(te.c,{initialValues:t,onSubmit:n,children:Object($.jsx)(te.b,{children:Object($.jsxs)("div",{className:"form",children:[Object($.jsx)(re,{name:K,label:"Username",disabled:r===G||r===Y,required:s,validate:function(e){if(""===e.trim())return"Please, enter your name:)"}}),Object($.jsx)(re,{name:X,label:"Age",disabled:r===G||r===Y,type:"number",required:s,validate:function(e){if(e<=15||e>=111)return"Not allowed age!"}}),Object($.jsx)(ne,{name:Q,label:"Role",disabled:r===G||r===Y,value:c,validate:function(e){if(!e)return"Field is required"}}),Object($.jsx)("br",{}),Object($.jsx)(ce,{mode:r})]})})})};var ae=function(){var e=Object(P.h)(),t=e.mode,n=e.id,r=Object(P.g)(),c=Object(u.c)(),a=Object(u.d)((function(e){return e.users.list})),i=Object(u.d)((function(e){return e.users.usersFetched})),o=a.find((function(e){return e.id===Number(n)})),d=Object(u.d)((function(e){return e.users.roles})),l=Object(u.d)((function(e){return e.users.rolesFetched}));Object(s.useEffect)((function(){t!==G&&t!==W||o||c(F(n)),i||c(C())}),[n,t,o,c,i]),Object(s.useEffect)((function(){t&&(l||c(S()))}),[l,c,t]);var j=function(){var e=Object(v.a)(m.a.mark((function e(n){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,s=n,e.t0=t,e.next=e.t0===J?5:e.t0===W?8:e.t0===H?11:e.t0===Y?14:17;break;case 5:return e.next=7,c(U(s));case 7:return e.abrupt("break",18);case 8:return e.next=10,c(E(s));case 10:return e.abrupt("break",18);case 11:return e.next=13,c(U(s));case 13:return e.abrupt("break",18);case 14:return e.next=16,c(D(s));case 16:return e.abrupt("break",18);case 17:console.error("Failed to execute this request for ".concat(t," mode"));case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0),window.alert(e.t1.message);case 23:r.push("/users");case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),b=function(e){return e||Z}(o);return Object($.jsx)(se,{initialValues:b,onSubmit:j,mode:t,roles:d,required:!0},"".concat(t,":").concat(b.id))};n(58);var ie=function(){return Object($.jsxs)("div",{children:[Object($.jsx)("h1",{children:"Not Found"}),Object($.jsx)("h3",{children:"Error 404"})]})};var ue=function(){var e=Object(P.i)().path,t=Object(s.useState)([]),n=Object(V.a)(t,2),r=n[0],c=n[1];return Object($.jsx)("div",{className:"App",children:Object($.jsxs)(P.d,{children:[Object($.jsx)(P.b,{exact:!0,path:e,children:Object($.jsx)(ee,{users:r,setUsers:c})}),Object($.jsx)(P.b,{exact:!0,path:"".concat(e,"/user/:mode(").concat(G,"|").concat(J,"|").concat(W,"|").concat(H,"|").concat(Y,")/:id?"),children:Object($.jsx)(ae,{users:r,setUsers:c})}),Object($.jsx)(P.b,{path:"*",children:Object($.jsx)(ie,{})})]})})},oe=(n(36),Object(u.b)((function(e){return{todos:e}}),(function(e){return{addTodo:function(t){return e(b(t))}}}))((function(e){var t=Object(s.useState)(""),n=Object(V.a)(t,2),r=n[0],c=n[1];return Object($.jsxs)("div",{className:"addTodos",children:[Object($.jsx)("input",{type:"text",placeholder:"Type your to do here",className:"input-todo",value:r,onChange:function(e){return function(e){c(e.target.value)}(e)}}),Object($.jsx)("br",{}),Object($.jsx)("button",{className:"addBtn",onClick:function(){""===r?alert("Task is empty"):(e.addTodo({id:Object(o.d)(),item:r,completed:!1}),c(""))},children:"Add"})]})}))),de=function(e){var t=e.item,n=e.removeTodo,r=e.completeTodo;return Object($.jsxs)("li",{className:"todoElem",children:[Object($.jsx)("p",{children:t.item}),Object($.jsxs)("div",{className:"buttons",children:[!1===t.completed&&Object($.jsx)("button",{style:{color:"green"},onClick:function(){return r(t.id)},className:"optionBtn",children:"Done"}),!0===t.completed&&Object($.jsx)("span",{children:"\u2705"}),Object($.jsx)("button",{style:{color:"red"},onClick:function(){return n(t.id)},className:"optionBtn",children:"Remove"})]})]},t.id)},le=Object(u.b)((function(e){return{todos:e.reducerTodo}}),(function(e){return{addTodo:function(t){return e(b(t))},removeTodo:function(t){return e(f(t))},completeTodo:function(t){return e(O(t))}}}))((function(e){return Object($.jsx)("div",{className:"displayTodos",children:Object($.jsx)("ul",{className:"todoList",children:e.todos.length>0?e.todos.map((function(t){return Object($.jsx)(de,{item:t,removeTodo:e.removeTodo,completeTodo:e.completeTodo},t.id)})):null})})}));var je=function(){return Object($.jsxs)("div",{className:"App",children:[Object($.jsxs)("nav",{children:[Object($.jsx)("h3",{children:"Menu"}),Object($.jsxs)("ul",{className:"nav-links",children:[Object($.jsx)("li",{children:Object($.jsx)(L.b,{to:"/users",children:Object($.jsx)("p",{children:"Users"})})}),Object($.jsx)("li",{children:Object($.jsx)(L.b,{to:"/todolist",children:Object($.jsx)("p",{children:"To do list"})})})]})]}),Object($.jsxs)(P.d,{children:[Object($.jsx)(P.a,{exact:!0,from:"/",to:"/users"}),Object($.jsx)(P.b,{path:"/users",children:Object($.jsx)(ue,{})}),Object($.jsxs)(P.b,{path:"/todolist",children:[Object($.jsx)("div",{className:"todoDiv",children:Object($.jsx)(oe,{})}),Object($.jsx)("div",{className:"todosDiv",children:Object($.jsx)(le,{})})]}),Object($.jsx)(P.b,{path:"*",children:Object($.jsx)(ie,{})})]})]})};var be=function(e){var t=e.children;return Object($.jsx)(L.a,{basename:"/globallogic-js-basecamp-2021/react/04-redux/build",children:t})},fe=(n(59),document.getElementById("root"));i.a.render(Object($.jsx)(s.StrictMode,{children:Object($.jsx)(be,{children:Object($.jsx)(u.a,{store:M,children:Object($.jsx)(je,{})})})}),fe)}},[[60,1,2]]]);
//# sourceMappingURL=main.b9cbf6b1.chunk.js.map